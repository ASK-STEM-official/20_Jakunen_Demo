# アプリケーション仕様書
## プロジェクト名
さぬきオリーブ受注管理システム SO-OMS(ソームス)
## 1. システム概要
今まで行っていたECサイトからのCSVデータ取得を自動で行い、そのデータをもとに発注データの管理、在庫の管理を円滑にすることが目的。

## 2. 機能仕様

### 2.1 管理者ログイン機能
- 事前登録制のID/PW認証（PBKDF2 または bcrypt を用いたハッシュ保存）
- パスワード入力欄は伏字対応
- ログイン成功後のみ操作可能な画面に遷移

### 2.2 商品マスタ管理機能
- 商品一覧表示（商品名、単価、在庫数、カテゴリ、出品状態）
- 商品の新規追加・編集・削除
- 商品ごとの在庫アラートしきい値の設定

### 2.3 CSVインポート機能
- ECサイトAPIからCSVを取得（リアルタイム更新 or 手動取得）
- データベースに予約情報と明細情報を保存
- CSVの生データは保存しない設計

### 2.4 受注一覧表示機能
- 条件絞り込み（受注ID、顧客名、予約日）
- 並べ替え（商品名、注文数、日時など）
- ステータス別フィルタリング対応

### 2.5 受注詳細表示機能
- 発注予約単位で、配送先住所、顧客氏名、注文明細、合計金額、支払方法を表示

### 2.6 受注ステータス管理機能
- ステータス遷移：「新規予約」→「受注確定」→「発送済」
- 「受注確定」時に在庫自動減算
- 履歴は `OrderStatusHistory` テーブルに保存（管理者ID付き）

### 2.7 顧客情報表示機能
- 顧客ごとの購入履歴・連絡先・注文回数・最終購入日を表示
- 顧客情報は `Customers` テーブル、注文履歴は別テーブルで保持

### 2.8 集計・分析機能
- 指定期間の売上集計、商品別販売数
- CSV出力とグラフ表示（棒グラフ・折れ線グラフ）
- 売上上位商品一覧表示

### 2.9 在庫アラート機能
- 商品ごとのしきい値を下回った場合にアラートを表示
- アラート履歴は `AlertLogs` テーブルに保存（解決フラグ付き）
- 発注リストの自動生成機能あり

## 3. 非機能要件

### 3.1 セキュリティ
- 管理者パスワードはハッシュ化
- 顧客データと受注データは物理的に分離
- 商品削除不可／明細には履歴を保持
- CSVファイルは一時保存せず、DBに直接格納

### 3.2 ログと責任追跡性
- ステータス変更ログは操作管理者IDと共に保存
- ログイン履歴・変更履歴の追跡が可能

### 3.3 拡張性
- MVCモデルを意識した設計
- 将来的な送り状自動発行・配送連携を想定
- 顧客ページや外部システム連携を意識

## 4. 使用技術

| 項目 | 内容 |
|------|------|
| 開発言語 | C# |
| フレームワーク | .NET Framework |
| DBMS | SQL Server 2022 Developer Edition CU19 |
| IDE | Visual Studio 2022, Visual Studio Code |
| ER設計 | Draw.io |
| バージョン管理 | Git (想定) |

## 5. データベース構成（主要テーブル）

- `Admins`：管理者情報
- `Products`：商品情報
- `ProductCategories`：商品カテゴリ情報
- `Customers`：顧客情報
- `OrderReservations`：発注予約ヘッダ
- `OrderReservationItems`：発注予約明細
- `OrderStatusHistory`：受注ステータス履歴
- `AlertLogs`：在庫アラート履歴

## 6. 画面構成（抜粋）

- ログイン画面
- 商品一覧画面
- 顧客管理画面
- 受注一覧画面
- 受注詳細画面
- 在庫アラート一覧画面
- 集計・分析画面（CSV出力／グラフ表示）

## 7. 備考

- アプリケーション名やUIカラー、アイコン等には香川県・瀬戸内海・オリーブをモチーフとした要素を採用予定
- 操作手順書およびプレゼン資料は別途作成する
