# アプリケーション仕様書
## プロジェクト名
さぬきオリーブ受注管理システム SO-OMS(ソームス)

## システム概要
今まで行っていたECサイトからのCSVデータ取得を自動で行い、そのデータをもとに発注データの管理、在庫の管理を円滑にすることが目的。

## 機能仕様
### 管理者ログイン機能
- 登録された管理者アカウントにログインする
- ユーザーIDとパスワードを用いて認証
- ログイン成功時のみダッシュボード画面に遷移
- 失敗時はエラーメッセージを表示

### 商品マスタ表示機能
- 登録されている商品リストを表示する。
- 商品ID,商品名,カテゴリ,商品説明,単価,在庫数,出品中フラグが確認可能
- 商品名,商品ID,カテゴリ,出品中かどうかで検索・絞り込みが可能
- 詳細ボタンを押下で商品詳細に遷移
- 新規登録ボタン押下で新規登録画面に遷移

### 商品マスタ登録機能
- 商品の新規登録が可能
- 商品情報(商品名,カテゴリ,商品説明,単価,在庫数,アラートしきい値,出品中フラグ)を登録し、DBに保存する機能
- 入力値のバリデーション

### 商品詳細表示機能
- 商品情報の編集が可能
- 商品情報(商品名,カテゴリ,商品説明,単価,在庫数,アラートしきい値,出品中フラグ)を更新しDBに保存する機能

### CSVインポート機能
- ECサイトAPIから受注データ(CSV)を取得、DBに保存
- 手動取得・自動定期取得(10分毎)

### 受注一覧表示機能
- 受注データ(予約ID,顧客名,商品名,数量,予約日,ステータス)を一覧表示
- 予約ID,顧客名,商品名で検索可能
- カテゴリ,予約日,ステータスで絞り込み可能
- 更新ボタン押下でCSVインポート機能を利用可能
- 最終CSV取込日時を表示

### 受注詳細表示機能
- 受注データの詳細表示(予約ID,顧客名,配送先住所,支払い方法,ステータス,ステータス更新日時,受注日,インポート時)
- 受注明細(項目数,商品名,単価,数量,税率,小計)を表示
- 注文の合計金額を表示
- 受注データ(配送先住所,支払い方法,ステータス)の編集が可能
- 更新ボタンを押下でDBに変更データを保存

### 受注ステータス管理機能
- 受注詳細画面から受注ステータス(新規予約,受注確定,発送済み,キャンセル)を更新できる
- ステータスを新規予約から受注確定に更新したタイミングで、該当商品の在庫数を減算する
- 新規予約から発送済に変更した場合、受注確定に変更後発送済みに変更
- 受注確定からキャンセルに変更した場合、該当商品の在庫数を増加する
- 発送済みからキャンセルに変更した場合、在庫数は変更せずステータスの変更のみ
- ステータス変更操作は履歴として記録される（変更日時、変更前後ステータス、操作管理者ID）
- 在庫数が不足している場合、受注確定または発送済への変更を制限する（エラーを表示）

### 顧客情報一覧機能
- 顧客情報(顧客ID,顧客名,住所,電話番号,注文数)を一覧表示
- 顧客ID,顧客名,住所,電話番号で絞り込み・検索
- 詳細ボタン押下で顧客詳細画面に遷移

### 顧客情報詳細表示機能
- 顧客情報(顧客ID,顧客名,住所,電話番号,注文数,登録日)を表示
- 顧客の注文履歴(予約ID,商品コード,商品名,数量,予約日)
- 顧客名,住所,電話番号を変更可能
- 更新ボタン押下で変更データをDBに保存

### 顧客情報登録機能
- 新規顧客情報の登録が可能
- 顧客情報(顧客名,住所,電話番号)を入力しDBに保存
- 入力値のバリデーション

### 簡易集計・分析機能
- 指定期間内の受注金額合計を折れ線グラフ表示
- 年次/月次/日次で表示切り替え
- 期間中の受注金額合計表示

### 在庫アラート機能
- 商品ごとの在庫しきい値を下回った際にダッシュボードでアラート表示
- アラート履歴(対象商品ID,アラート発生日時,対応済みフラグ)の記録・一覧表示
- 対応済みフラグを変更可能
- 対応済みのフラグはアラート一覧から非表示

## 画面仕様
### ログイン画面
- システム名/ロゴ
- ユーザー名,パスワードの入力欄
- ログインボタン(押下でログイン処理)
- 失敗時はダイアログを表示

### ダッシュボード画面
- 商品一覧,受注一覧,分析メニュー,ログアウトボタン
- ログアウトボタン押下でログアウト処理、ログイン画面に遷移
- 商品一覧,受注一覧,分析メニューボタン押下でそれぞれの画面を表示

### 商品一覧画面
- 商品リスト,検索欄,絞り込み,検索ボタン,詳細ボタン,新規登録ボタン
- 商品リストは商品ID,商品名,カテゴリ,説明,単価,在庫,出品中フラグ,詳細ボタンの順でリスト表示
- 説明は20文字以降は"..."で省略
- リストの詳細ボタン押下で該当商品の商品詳細画面を表示
- 商品名・商品ID(入力フォーム),カテゴリ(コンボボックス),出品中表示のみ(チェックボックス)
- 検索ボタン押下で検索実行
- 検索結果の件数を表示

### 商品詳細画面
- 商品ID,商品名,カテゴリ,商品説明,単価,在庫数,出品中,在庫アラートしきい値,保存ボタン,閉じるボタン
- 商品IDは編集不可
- カテゴリ,出品中はコンボボックスで選択
- 閉じるボタン押下で閉じる
- 保存ボタン押下で変更データを保存

### 商品登録画面
- 商品名,カテゴリ,説明,単価,在庫数,アラートしきい値,出品中フラグを表示
- 出品中フラグはデフォルト値出品中
- 入力値のバリデーション
- 登録ボタン押下でDBに保存
- キャンセルボタンで画面を閉じる

### 受注一覧画面
- 受注リスト（予約ID、顧客名、商品名、数量、予約日、ステータス）,詳細ボタンをDataGridView等で表示
- 検索欄（予約ID、顧客名、商品名）、絞り込み（カテゴリ、予約日、ステータス）
- 検索ボタンでリスト更新
- 詳細ボタン押下で受注詳細画面を表示
- 新規登録ボタン押下で受注登録画面を表示
- CSVインポートの最終取込日時を表示
- 更新ボタンでCSVインポート処理を実行

### 受注詳細画面
- 受注情報（予約ID、顧客名、顧客ID、電話番号、配送先住所、支払い方法、ステータス、ステータス更新日時、受注日、インポート日時）を表示・編集
- 予約ID、顧客名、ステータス更新日時、受注日、インポート日時は編集不可
- 受注明細（項目数、商品名、単価、数量、税率、小計）をリスト表示
- 合計金額を表示
- ステータス変更時は在庫数の自動調整
- 更新ボタンでDBに保存
- 閉じるボタンで画面を閉じる

### 受注登録画面
- 受注情報（顧客ID、配送先住所、支払い方法、ステータス）を入力
- 登録ボタンでDBに新規登録
- 登録時に受注日を設定
- 入力値のバリデーション
- キャンセルボタンで画面を閉じる

### 分析メニュー画面
- 売上グラフ・顧客一覧ボタンを配置
- 各ボタン押下で該当画面を表示

### 顧客一覧画面
- 顧客リスト（顧客ID、顧客名、住所、電話番号、注文数）、詳細ボタンをDataGridView等で表示
- 検索欄（顧客ID、顧客名、住所、電話番号）
- 検索ボタン押下でリスト更新
- 詳細ボタン押下で顧客詳細画面を表示
- 新規登録ボタン押下で顧客登録画面を表示
- 戻るボタンで画面を閉じる

### 顧客詳細画面
- 顧客情報（顧客ID、顧客名、住所、電話番号、注文数）を表示・編集
- 顧客ID、注文数は変更不可
- 顧客の注文履歴（予約ID、商品コード、商品名、数量、予約日）をリスト表示
- 更新ボタンでDBに保存
- 閉じるボタンで画面を閉じる

### 顧客登録画面
- 顧客情報（顧客名、住所、電話番号）を入力するフォーム
- 登録時に登録日を設定
- 登録ボタンでDBに新規登録
- 入力値のバリデーション
- キャンセルボタンで画面を閉じる

### 受注金額グラフ画面
- 指定期間内の受注金額合計を折れ線グラフで表示
- 年次／月次／日次の切り替えで表示を更新
- 期間中の受注金額合計を数値で表示
- 戻るボタン押下で閉じる

## 技術仕様
- 開発言語: C#
- フレームワーク: .NET Framework
- データベース: SQL Server 2022
- 外部連携: ECサイトAPI